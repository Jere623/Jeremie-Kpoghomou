import streamlit as st
from pathlib import Path
from PIL import Image
import io

# ------------------------------
# Page config & initial state
# ------------------------------
st.set_page_config(
    page_title="L'IA, le monde de demain  ‚Äì Pr√©sentation interactive",
    page_icon="‚ú®",
    layout="wide",
)

if "initialized" not in st.session_state:
    st.session_state.initialized = True
    st.session_state.section = "Introduction"
    st.session_state.presentation_on = False
    st.session_state.profile = {
        "name": "J√©r√©mie KPOGHOMOU",
        "profil": "Ing√©nieur Data chez Safran Aircraft Engines",
        "image_path": "KPOGHOMOU-Style libre-102x152 mm.jpg",
        "linkedin": "https://www.linkedin.com/in/j√©r√©miekpoghomou/",
        "email": "jeremie.kpoghomou77@gmail.com",
        "github": "https://github.com/Jere623",
        "linkedin_logo": "Linkedin-Logo-PNG.png",
        "github_logo": "GitHub-cat-logo.jpg",
    }

# ------------------------------
# Custom CSS (animations & style)
# ------------------------------
st.markdown(
    """
    <style>
    :root { --radius: 16px; }

    .big-title {
        font-weight: 800;
        font-size: clamp(32px, 5vw, 60px);
        line-height: 1.2;
        margin: 0 0 12px 0;
        background: linear-gradient(90deg, red, yellow, green);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        animation: glow 6s ease-in-out infinite;
    }

    @keyframes glow {
        0%,100% { filter: drop-shadow(0 0 0px rgba(0,0,0,0)); }
        50% { filter: drop-shadow(0 0 6px rgba(0,0,0,.35)); }
    }

    .profile-name {
        font-weight: 800; font-size: 1.5rem;
        margin-top: 2px; margin-bottom: 2px;
    }

    .profile-profil {
        font-weight: 800;
        font-size: 1.2rem;
        color: purple;
        margin-top: 2px; margin-bottom: 6px;
    }

    .profile-info {
        font-size: 0.85rem;
        margin-bottom: 4px;
        display: flex;
        align-items: center;
    }

    .profile-info img {
        width: 20px; height: 20px;
        margin-right: 6px;
        object-fit: contain;
    }

    .intro-box {
        background-color: #f5f5f5;
        border-radius: 16px;
        padding: 0px;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
        text-align: center;
    }

    .intro-box img {
        margin: 0;
    }

    .footnote {
        font-size: 1rem;
        opacity: .8;
        margin-top: 10px;
        text-align: center;
    }

    .quiz-button {
        background-color: #FF5733;
        color: white;
        font-weight: bold;
        padding: 12px;
        border-radius: 12px;
        text-align: center;
        cursor: pointer;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.3);
    }

    .nice-button {
        display: inline-block;
        background: linear-gradient(90deg, #ff7e5f, #feb47b);
        color: white;
        font-weight: bold;
        padding: 12px 24px;
        border-radius: 12px;
        text-align: center;
        text-decoration: none;
        font-size: 1.1rem;
        transition: 0.3s;
    }
    .nice-button:hover {
        background: linear-gradient(90deg, #feb47b, #ff7e5f);
        transform: scale(1.05);
        cursor: pointer;
    }
    </style>
    """,
    unsafe_allow_html=True,
)

# ------------------------------
# LAYOUT: Left panel
# ------------------------------
left, right = st.columns([1, 3])

with left:
    if st.button("üîò On|Off la Pr√©sentation"):
        st.session_state.presentation_on = not st.session_state.presentation_on

    show_qr_checkbox = st.checkbox("QRcode", value=False)
    if show_qr_checkbox:
        show_real_qr = st.checkbox("Afficher QRcode", value=True)
        if show_real_qr:
            qr_path = Path("/Users/jeremie/Desktop/Myprojet_C02/QRCode_Formation_IA.png")
            if qr_path.exists():
                img_qr = Image.open(qr_path)
                st.image(img_qr, caption="üîó QR Code", use_column_width=True)
            else:
                st.warning("Le fichier QRCode_Quiz.png est introuvable.")

    if st.session_state.presentation_on:
        selected_section = st.radio(
            label="SOMMAIRE",
            options=[
                "Introduction",
                "1. Pr√©sentation",
                "2. Comprendre l‚ÄôIA et l‚ÄôIA G√©n√©rative",
                "3. Les Domaines de l‚ÄôIA et Applications Utiles",
                "4. L'art du prompting",
                "4. Messages cibl√©s",
                "5. Utiliser l‚ÄôIA pour Am√©liorer son CV",
                "6. Quiz de Fin de Formation (20 questions)",
                "7. Conclusion",
            ],
            index=0,
            key="radio_plan"
        )
        st.session_state.section = selected_section

        # Profil affich√© dans le panneau gauche
        prof = st.session_state.profile
        img_path = Path(prof.get("image_path", ""))
        if img_path.exists():
            img = Image.open(img_path)
            img = img.resize((180, 200))
            st.image(img)
        else:
            st.warning("Aucune image valide trouv√©e.")

        st.markdown(f"<div class='profile-name'>{prof['name']}</div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-profil'>{prof['profil']}</div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-info'><img src='file://{prof['linkedin_logo']}' /> <a href='{prof['linkedin']}' target='_blank'>{prof['linkedin']}</a></div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-info'><img src='file://{prof['github_logo']}' /> <a href='{prof['github']}' target='_blank'>{prof['github']}</a></div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-info'>Email: <a href='mailto:{prof['email']}'>{prof['email']}</a></div>", unsafe_allow_html=True)

# ------------------------------
# RIGHT: Display section content dynamically
# ------------------------------
with right:
    if st.session_state.presentation_on:
        st.markdown("<div class='big-title' style='text-align: center;'>Comprendre le fonctionnement de l'IA et l'IA g√©n√©rative, am√©liorer son CV</div>", unsafe_allow_html=True)
        st.caption("L'IA, le monde de demain  ‚Äì Pr√©sentation interactive")

        # Nouveau contenu inject√© dans chaque section
        CONTENT = {
            "Introduction": "## Introduction & Objectifs de la Formation\n\n**üéØ Objectifs p√©dagogiques :**\n1. Comprendre ce qu‚Äôest l‚ÄôIntelligence Artificielle (IA) et l‚ÄôIA g√©n√©rative\n2. D√©couvrir les domaines et applications majeures de l‚ÄôIA\n3. Apprendre √† utiliser l‚ÄôIA pour am√©liorer son CV\n4. Savoir r√©diger des prompts efficaces pour g√©n√©rer du contenu pertinent\n5. √âviter les pi√®ges courants li√©s √† l‚ÄôATS et √† la r√©daction de CV\n6. Explorer les meilleurs sites et outils pour cr√©er un CV optimis√©.",
            "1. Pr√©sentation": "## 1. Pr√©sentation.\n\n**üìå Parcours Scolaire**\n\nExp√©riences professionnelles...",
            "2. Comprendre l‚ÄôIA et l‚ÄôIA G√©n√©rative": "## 2. Comprendre l‚ÄôIA et l‚ÄôIA G√©native.\n\n**üéØ Objectifs p√©dagogiques**\n\nComprendre ce qu‚Äôest l‚ÄôIntelligence Artificielle (IA) et l‚ÄôIA g√©n√©rative.\nD√©couvrir les domaines et applications majeures de l‚ÄôIA.\nApprendre √† utiliser l‚ÄôIA pour am√©liorer son CV.\nSavoir r√©diger des prompts efficaces pour g√©n√©rer du contenu pertinent.\n√âviter les pi√®ges courants li√©s √† l‚ÄôATS et √† la r√©daction de CV.\nExplorer les meilleurs sites et outils pour cr√©er un CV optimis√©....",
            "3. Les Domaines de l‚ÄôIA et Applications Utiles": "## 3. Les Domaines de l‚ÄôIA et Applications Utiles\n\n**üß† D√©finition de l‚ÄôIA**\n\nComprendre ce qu‚Äôest l‚ÄôIntelligence Artificielle (IA) et l‚ÄôIA g√©n√©rative.\nIA (Intelligence Artificielle) : ensemble de technologies permettant √† une machine d‚Äôimiter l‚Äôintelligence humaine (raisonner, apprendre, d√©cider).\n\n**üñºÔ∏è D√©finition de l‚ÄôIA g√©n√©rative**\n\nIA g√©n√©rative : branche de l‚ÄôIA capable de cr√©er du contenu nouveau (texte, image, vid√©o, son).\nExemples : ChatGPT (texte), DALL-E (images), Midjourney, Claude AI.",
            "4. L'art du prompting": "## 4. L'art du prompting\n\nLe prompting est l‚Äôart de formuler correctement des requ√™tes √† une IA g√©n√©rative pour obtenir un contenu pertinent et pr√©cis.",
            "4. Messages cibl√©s": "## 4. Messages cibl√©s\n\nCeci est une section simple pour afficher des messages aux diff√©rents profils.",
            "5. Utiliser l‚ÄôIA pour Am√©liorer son CV": "## 5. Utiliser l‚ÄôIA pour Am√©liorer son CV\n\nüìå R√©sumons tout en trois mots simples...",
            "6. Quiz de Fin de Formation (20 questions)": "## 6. Quiz de Fin de Formation (20 questions)\n\n‚úÖ Oser r√™ver d√®s le coll√®ge...",
            "7. Conclusion": "## 7. Conclusion\n\nüìå L‚Äôavenir n‚Äôest pas une chance, c‚Äôest une responsabilit√©...",
        }

        current_section = st.session_state.section
        if current_section in CONTENT:
            st.markdown(CONTENT[current_section])

        # Ajout des checkbox demand√©es (uniquement ces 3 blocs, rien d'autre modifi√©)
        if current_section == "2. Comprendre l‚ÄôIA et l‚ÄôIA G√©n√©rative":
            if st.checkbox("üéØ Objectif"):
                st.info("aaaaaa")
            if st.checkbox("üìñ Pr√©sentation"):
                st.info("yyyyyy")
            

        if current_section == "4. L'art du prompting":
            if st.checkbox("‚≠ê Importance"):
                st.info("vsbsbsbssbsb")
            if st.checkbox("üí° Avantage"):
                st.info("oooooooooo")
            if st.checkbox("üìã Liste"):
                st.info("fffffffff")

        if current_section == "5. Utiliser l‚ÄôIA pour Am√©liorer son CV":
            if st.checkbox("‚úÖ Bonnes pratiques"):
                st.info("eeeeee")
            if st.checkbox("‚ö†Ô∏è Erreurs √† √©viter"):
                st.info("tttttttt")

        # Tableau comparatif et programme IA
        if current_section == "3. Les Domaines de l‚ÄôIA et Applications Utiles":
            if st.checkbox("Afficher le tableau comparatif IA classique vs IA g√©n√©rative"):
                st.markdown("""
                | **IA classique**                        | **IA g√©n√©rative**                    |
                |----------------------------------------|-------------------------------------|
                | Analyse, pr√©dit, classifie, optimise   | Cr√©e du contenu original             |
                | Utilise des mod√®les pr√©dictifs         | Utilise des mod√®les de langage (LLM) |
                | R√©pond √† ‚ÄúQue se passera-t-il ?‚Äù       | R√©pond √† ‚ÄúInvente quelque chose de nouveau‚Äù |
                | Ex. : Syst√®me de recommandation Netflix | Ex. : R√©daction automatique d‚Äôun CV personnalis√© |
                """)

            if st.checkbox("Afficher le tableau comparatif Programme classique vs Programme IA"):
                st.markdown("""
                | **Programme / Script classique**        | **Programme utilisant l‚ÄôIA**        |
                |----------------------------------------|-----------------------------------|
                | Suit des instructions fixes            | Apprend √† partir de donn√©es        |
                | Ne s‚Äôadapte pas automatiquement        | Peut s‚Äôam√©liorer avec l‚Äôexp√©rience |
                | Donne toujours le m√™me r√©sultat pour les m√™mes donn√©es | Peut pr√©dire ou g√©n√©rer des r√©sultats nouveaux |
                | Exemple : script de calcul             | Exemple : mod√®le de pr√©diction de prix |
                """)

        # Messages cibl√©s
        if current_section == "4. Messages cibl√©s":
            if st.checkbox("Aux √©l√®ves et aux √©tudiants"):
                st.info("üëâ Vous devez explorer, tester, √™tre curieux, car le dipl√¥me seul ne comptera pas.")
            if st.checkbox("Dipl√¥m√©s en recherche d'emploi"):
                st.info("üëâ Votre valeur n‚Äôest pas d√©finie par votre situation actuelle. Montrez vos talents, m√™me √† petite √©chelle.")
            if st.checkbox("Aux travailleurs"):
                st.info("üëâ Le monde change, et vous devez vous r√©inventer.")

        # Section Quiz
        if current_section == "6. Quiz de Fin de Formation (20 questions)":
            if st.button("üì≤ Cliquez ici pour voir le QR Code du Quiz"):
                qr_path = Path("/Users/jeremie/Desktop/Myprojet_C02/Quiz_seÃÅpa_en_2_IA.png")
                if qr_path.exists():
                    img_qr = Image.open(qr_path)
                    img_qr = img_qr.resize((200, 180))
                    st.image(img_qr, caption="Scannez pour acc√©der au Quiz")
                else:
                    st.warning("‚ö†Ô∏è QR Code introuvable, v√©rifiez le fichier.")

        st.markdown("<div class='footnote'>¬© Pr√©sentation - By J√©r√©mie KPOGHOMOU - Data Scientist.</div>", unsafe_allow_html=True)

------------------------------------------------------------

import streamlit as st
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from sklearn.linear_model import LinearRegression
from sklearn.ensemble import RandomForestRegressor, ExtraTreesRegressor
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler
from sklearn.metrics import mean_squared_error, r2_score, confusion_matrix, accuracy_score, precision_score, recall_score, f1_score
from joblib import dump, load
import xgboost as xgb
from xgboost import XGBRegressor
from sklearn.ensemble import RandomForestClassifier, ExtraTreesClassifier, BaggingClassifier

df = pd.read_csv('Modelisation.csv')
df = df[df.Vehicule_loisir == 1]
def fonction_1(df):
   


    st.title("R√©gressions")
    st.write("## Pr√©diction du taux de CO2")

    # Types de carburant propos√©s
    chx_carb = ["Essence", "Diesel"]

    # Choix des valeurs des variables
    masse_value = st.text_input("Masse du v√©hicule (kg)", value=1490)
    empattement_value = st.text_input("Empattement du v√©hicule (mm)", value=2650)
    larg_essieu_dir_value = st.text_input("Largeur de l'essieu directeur (mm)", value=1541)
    puissance_moteur_value = st.text_input("Puissance du moteur (kW)", value=96)
    cylindree_value = st.text_input("Cylindr√©e du v√©hicule (cm¬≥)", value=1598)

    # Choix du type de carburant
    st.write(" ###### Choix du type de carburant :")
    input_data = pd.DataFrame({
        'Masse': [masse_value],
        'Empattement': [empattement_value],
        'Larg_essieu_dir': [larg_essieu_dir_value],
        'Puiss_moteur': [puissance_moteur_value],
        'Cylindree': [cylindree_value],
        'Type_carburant_Diesel': [1 if st.checkbox("Diesel") else 0],
        'Type_carburant_Essence': [1 if st.checkbox("Essence") else 0]
    })

    # S√©lection des variables pour la r√©gression
    df_num = df[['Emis_CO2_spe', 'Masse', 'Empattement', 'Larg_essieu_dir', 'Puiss_moteur', 'Cylindree']]
    df_filtered = df[df['Type_carburant'].isin(['Diesel', 'Essence'])]
    df_cat = pd.get_dummies(df_filtered[['Type_carburant']])
    df_model = pd.concat([df_num, df_cat], axis=1)
    df_model = df_model.dropna()

    # Cr√©ation des r√©gresseurs
    lr = LinearRegression()
    rfr = RandomForestRegressor()
    etr = ExtraTreesRegressor()
    xgb_reg = XGBRegressor()

    # Choix du mod√®le
    reg_choisie = st.selectbox(" ###### Choix de la r√©gression :", ['LinearRegression', 'ExtraTreesRegressor', 'RandomForestRegressor', 'XGBRegressor'])
    reg = lr if reg_choisie == "LinearRegression" else etr if reg_choisie == "ExtraTreesRegressor" else rfr if reg_choisie == "RandomForestRegressor" else xgb_reg

    # S√©paration du jeu de donn√©es
    X = df_model.drop(['Emis_CO2_spe'], axis=1)
    y = df_model['Emis_CO2_spe']

    # Cr√©ation d'un jeu d'entra√Ænement et d'un jeu de tests
    X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

    # Standardisation des donn√©es
    scaler = StandardScaler()
    X_train = scaler.fit_transform(X_train)
    X_test = scaler.transform(X_test)

    # Entra√Ænement du mod√®le
    reg.fit(X_train, y_train)

    # Enregistrement du mod√®le
    modele_filename = f"modele_{reg_choisie.lower()}.pkl"
    dump(reg, modele_filename)

    # Chargement du mod√®le
    modele = load(modele_filename)

    # Affichage du taux de CO2 pr√©dit pour le type de carburant choisi
    input_data = scaler.transform(input_data)
    y_pred_input = modele.predict(input_data)
    st.write(f" ### Taux de CO2 pr√©dit : {y_pred_input[0]:.3f} g/km")

    # Pr√©diction
    y_pred = modele.predict(X_test)

    # Pr√©diction pour le type de carburant choisi
    input_data = scaler.transform(input_data)
    y_pred_input = modele.predict(input_data)

    # Calcul des m√©triques (RMSE et R^2) avec les pr√©dictions sur le jeu de test
    y_test_pred = modele.predict(X_test)
    mse = mean_squared_error(y_test, y_test_pred)
    rmse = np.sqrt(mse)
    r2 = r2_score(y_test, y_test_pred)

    # Affichage des m√©triques
    st.write("#### Performance du mod√®le :")
    st.write(f"R¬≤ : {r2}")
    st.write(f"RMSE : {rmse}")

    # Graphique nuage de points
    fig, ax = plt.subplots()
    ax.scatter(y_test, y_pred, s=30, alpha=0.5)
    ax.plot([min(y_test), max(y_test)], [min(y_test), max(y_test)])
    ax.set_xlabel("Valeurs r√©elles")
    ax.set_ylabel("Pr√©dictions")
    ax.set_title("Nuage de points (R√©el vs Pr√©diction)")
    st.pyplot(fig)

    # Calcul de l'importance des caract√©ristiques
    importances = getattr(reg, 'feature_importances_', None)

    # Affichage du graphique d'importance des caract√©ristiques si les importances sont disponibles
    if importances is not None:
        feature_names = X.columns
        importance_df = pd.DataFrame({'Feature': feature_names, 'Importance': importances})

        # Tri du DataFrame par ordre d√©croissant
        importance_df = importance_df.sort_values(by='Importance', ascending=True)

        st.write("### Importance des caract√©ristiques")
        fig, ax = plt.subplots()
        ax.barh(importance_df['Feature'], importance_df['Importance'])
        ax.set_xlabel('Importance')
        ax.set_title(f'Importance des caract√©ristiques pour {reg_choisie}')
        st.pyplot(fig)

def fonction_2(df):
    st.title("Classification")
    st.write("## Pr√©diction des classes de CO2")

    # Choix des valeurs des variables
    masse_value = st.text_input("Masse du v√©hicule (kg) :", value=1490)
    empattement_value = st.text_input("Empattement du v√©hicule (mm) :", value=2650)
    larg_essieu_dir_value = st.text_input("Largeur de l'essieu directeur (mm) :", value=1541)
    puissance_moteur_value = st.text_input("Puissance du moteur (kW) :", value=96)
    cylindree_value = st.text_input("Cylindr√©e du v√©hicule (cm¬≥) :", value=1598)

    # S√©lection du mod√®le
    reg_choisie = st.selectbox(" ###### Choix de la classification :", ['RandomForestClassifier', 'ExtraTreesClassifier', 'BaggingClassifier'])

    # S√©lection des hyperparam√®tres en fonction du mod√®le choisi
    if reg_choisie == "RandomForestClassifier":
        reg = RandomForestClassifier(n_jobs=-1, random_state=321, max_depth=20, min_samples_leaf=1, min_samples_split=2, n_estimators=300)
    elif reg_choisie == "ExtraTreesClassifier":
        reg = ExtraTreesClassifier(n_estimators=100, random_state=42)
    elif reg_choisie == "BaggingClassifier":
        reg = BaggingClassifier(n_estimators=1000, oob_score=True)

    # S√©paration du jeu de donn√©es
    X = df[['Masse', 'Empattement', 'Larg_essieu_dir', 'Puiss_moteur', 'Cylindree']]
    y = df['Classe_CO2']

    # Cr√©ation d'un jeu d'entra√Ænement et d'un jeu de tests
    X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

    # Standardisation des donn√©es
    scaler_classification = StandardScaler()
    X_train_classification = scaler_classification.fit_transform(X_train)
    X_test_classification = scaler_classification.transform(X_test)

    # Entra√Ænement du mod√®le
    reg.fit(X_train_classification, y_train)

    # Enregistrement du mod√®le
    modele_filename = f"modele_{reg_choisie.lower()}.pkl"
    dump(reg, modele_filename)

    # Chargement du mod√®le
    modele = load(modele_filename)

    # Affichage du taux de CO2 pr√©dit pour le type de carburant choisi
    input_data = np.array([masse_value, empattement_value, larg_essieu_dir_value, puissance_moteur_value, cylindree_value]).reshape(1, -1)
    input_data_standardized_classification = scaler_classification.transform(input_data)
    classe_CO2_predite = modele.predict(input_data_standardized_classification)
    st.write(f" ### Classe de CO2 pr√©dite pour les param√®tres choisis : {classe_CO2_predite[0]}")

    # Pr√©diction sur le jeu de test
    y_pred_classification = modele.predict(X_test_classification)

    # √âvaluation du mod√®le
    conf_matrix = confusion_matrix(y_test, y_pred_classification)
    accuracy = accuracy_score(y_test, y_pred_classification)
    precision = precision_score(y_test, y_pred_classification, average='weighted')
    recall = recall_score(y_test, y_pred_classification, average='weighted')
    f1 = f1_score(y_test, y_pred_classification, average='weighted')

    # Affichage des r√©sultats
    st.write("#### Performance du mod√®le :")
    st.write(f"Accuracy : {accuracy}")
    st.write(f"Precision : {precision}")
    st.write(f"Recall : {recall}")
    st.write(f"F1 Score : {f1}")
    
    # Affichage de la matrice de confusion
    st.write("### Matrice de confusion :")
    st.write(pd.DataFrame(conf_matrix, columns=[f'Pr√©dit {i}' for i in reg.classes_], index=[f'Vrai {i}' for i in reg.classes_]))

    # Texte explicatif sur les classes de CO2
    st.write("Les classes de CO2 sont d√©finies comme suit :")
    st.write("- Classe 'A': Taux inf√©rieurs ou √©gaux √† 100 g/km")
    st.write("- Classe 'B': Taux entre 100 et 120 g/km")
    st.write("- Classe 'C': Taux entre 120 et 140 g/km")
    st.write("- Classe 'D': Taux entre 140 et 160 g/km")
    st.write("- Classe 'E': Taux entre 160 et 200 g/km")
    st.write("- Classe 'F': Taux entre 200 et 250 g/km")
    st.write("- Classe 'G': Taux sup√©rieurs √† 250 g/km")
    st.write("\n")

def main():
    fonction_1(df)
    fonction_2(df)
main()




import streamlit as st
from pathlib import Path
from PIL import Image
import io

# ------------------------------
# Page config & initial state
# ------------------------------
st.set_page_config(
    page_title="L'IA, le monde de demain  ‚Äì Pr√©sentation interactive",
    page_icon="‚ú®",
    layout="wide",
)

if "initialized" not in st.session_state:
    st.session_state.initialized = True
    st.session_state.section = "Introduction"
    st.session_state.presentation_on = False
    st.session_state.profile = {
        "name": "J√©r√©mie KPOGHOMOU",
        "profil": "Ing√©nieur Data chez Safran Aircraft Engines",
        "image_path": "KPOGHOMOU-Style libre-102x152 mm.jpg",
        "linkedin": "https://www.linkedin.com/in/j√©r√©miekpoghomou/",
        "email": "jeremie.kpoghomou77@gmail.com",
        "github": "https://github.com/Jere623",
        "linkedin_logo": "Linkedin-Logo-PNG.png",
        "github_logo": "GitHub-cat-logo.jpg",
    }

# ------------------------------
# Custom CSS (animations & style)
# ------------------------------
st.markdown(
    """
    <style>
    :root { --radius: 16px; }

    .big-title {
        font-weight: 800;
        font-size: clamp(32px, 5vw, 60px);
        line-height: 1.2;
        margin: 0 0 12px 0;
        background: linear-gradient(90deg, red, yellow, green);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        animation: glow 6s ease-in-out infinite;
    }

    @keyframes glow {
        0%,100% { filter: drop-shadow(0 0 0px rgba(0,0,0,0)); }
        50% { filter: drop-shadow(0 0 6px rgba(0,0,0,.35)); }
    }

    .profile-name {
        font-weight: 800; font-size: 1.5rem;
        margin-top: 2px; margin-bottom: 2px;
    }

    .profile-profil {
        font-weight: 800;
        font-size: 1.2rem;
        color: purple;
        margin-top: 2px; margin-bottom: 6px;
    }

    .profile-info {
        font-size: 0.85rem;
        margin-bottom: 4px;
        display: flex;
        align-items: center;
    }

    .profile-info img {
        width: 20px; height: 20px;
        margin-right: 6px;
        object-fit: contain;
    }

    .intro-box {
        background-color: #f5f5f5;
        border-radius: 16px;
        padding: 0px;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
        text-align: center;
    }

    .intro-box img {
        margin: 0;
    }

    .footnote {
        font-size: 1rem;
        opacity: .8;
        margin-top: 10px;
        text-align: center;
    }

    .quiz-button {
        background-color: #FF5733;
        color: white;
        font-weight: bold;
        padding: 12px;
        border-radius: 12px;
        text-align: center;
        cursor: pointer;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.3);
    }

    .nice-button {
        display: inline-block;
        background: linear-gradient(90deg, #ff7e5f, #feb47b);
        color: white;
        font-weight: bold;
        padding: 12px 24px;
        border-radius: 12px;
        text-align: center;
        text-decoration: none;
        font-size: 1.1rem;
        transition: 0.3s;
    }
    .nice-button:hover {
        background: linear-gradient(90deg, #feb47b, #ff7e5f);
        transform: scale(1.05);
        cursor: pointer;
    }
    </style>
    """,
    unsafe_allow_html=True,
)

# ------------------------------
# LAYOUT: Left panel
# ------------------------------
left, right = st.columns([1, 3])

with left:
    if st.button("üîò On|Off la Pr√©sentation"):
        st.session_state.presentation_on = not st.session_state.presentation_on

    show_qr_checkbox = st.checkbox("QRcode", value=False)
    if show_qr_checkbox:
        show_real_qr = st.checkbox("Afficher QRcode", value=True)
        if show_real_qr:
            qr_path = Path("/Users/jeremie/Desktop/Myprojet_C02/QRCode_Formation_IA.png")
            if qr_path.exists():
                img_qr = Image.open(qr_path)
                st.image(img_qr, caption="üîó QR Code", use_column_width=True)
            else:
                st.warning("Le fichier QRCode_Quiz.png est introuvable.")

    if st.session_state.presentation_on:
        selected_section = st.radio(
            label="SOMMAIRE",
            options=[
                "Introduction",
                "1. Pr√©sentation",
                "2. Comprendre l‚ÄôIA et l‚ÄôIA G√©n√©rative",
                "3. Les Domaines de l‚ÄôIA et Applications Utiles",
                "4. L'art du prompting",
                "4. Messages cibl√©s",
                "5. Utiliser l‚ÄôIA pour Am√©liorer son CV",
                "6. Quiz de Fin de Formation (20 questions)",
                "7. Conclusion",
            ],
            index=0,
            key="radio_plan"
        )
        st.session_state.section = selected_section

        # Profil affich√© dans le panneau gauche
        prof = st.session_state.profile
        img_path = Path(prof.get("image_path", ""))
        if img_path.exists():
            img = Image.open(img_path)
            img = img.resize((180, 200))
            st.image(img)
        else:
            st.warning("Aucune image valide trouv√©e.")

        st.markdown(f"<div class='profile-name'>{prof['name']}</div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-profil'>{prof['profil']}</div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-info'><img src='file://{prof['linkedin_logo']}' /> <a href='{prof['linkedin']}' target='_blank'>{prof['linkedin']}</a></div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-info'><img src='file://{prof['github_logo']}' /> <a href='{prof['github']}' target='_blank'>{prof['github']}</a></div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-info'>Email: <a href='mailto:{prof['email']}'>{prof['email']}</a></div>", unsafe_allow_html=True)

# ------------------------------
# RIGHT: Display section content dynamically
# ------------------------------
with right:
    if st.session_state.presentation_on:
        st.markdown("<div class='big-title' style='text-align: center;'>Comprendre le fonctionnement de l'IA et l'IA g√©n√©rative, am√©liorer son CV</div>", unsafe_allow_html=True)
        st.caption("L'IA, le monde de demain  ‚Äì Pr√©sentation interactive")

        # Nouveau contenu inject√© dans chaque section
        CONTENT = {
            "Introduction": "## Introduction & Objectifs de la Formation\n\n**üéØ Objectifs p√©dagogiques :**\n1. Comprendre ce qu‚Äôest l‚ÄôIntelligence Artificielle (IA) et l‚ÄôIA g√©n√©rative\n2. D√©couvrir les domaines et applications majeures de l‚ÄôIA\n\n3. Savoir r√©diger des prompts efficaces pour g√©n√©rer du contenu pertinent \n\n4. Apprendre √† utiliser l‚ÄôIA pour am√©liorer son CVn.\n\n5. √âviter les pi√®ges courants li√©s √† l‚ÄôATS et √† la r√©daction de CV\n\n6. Explorer les meilleurs sites et outils pour cr√©er un CV optimis√©.",
            "1. Pr√©sentation": "## 1. Pr√©sentation.\n\n**üìå Parcours Scolaire**\n\nExp√©riences professionnelles...",
            "2. Comprendre l‚ÄôIA et l‚ÄôIA G√©n√©rative": "## 2. Comprendre l‚ÄôIA et l‚ÄôIA G√©n√©rative.\n\n**üéØ Objectifs p√©dagogiques**\n\nComprendre ce qu‚Äôest l‚ÄôIntelligence Artificielle (IA) et l‚ÄôIA g√©n√©rative.\n\nD√©couvrir les domaines et applications majeures de l‚ÄôIA.\n\nApprendre √† utiliser l‚ÄôIA pour am√©liorer son CV.\n\nSavoir r√©diger des prompts efficaces pour g√©n√©rer du contenu pertinent.\n\n√âviter les pi√®ges courants li√©s √† l‚ÄôATS et √† la r√©daction de CV.\n\nExplorer les meilleurs sites et outils pour cr√©er un CV optimis√©....",
            "3. Les Domaines de l‚ÄôIA et Applications Utiles": "## 3. Les Domaines de l‚ÄôIA et Applications Utiles\n\n**üß† D√©finition de l‚ÄôIA**\n\nComprendre ce qu‚Äôest l‚ÄôIntelligence Artificielle (IA) et l‚ÄôIA g√©n√©rative.\n\nIA (Intelligence Artificielle) : ensemble de technologies permettant √† une machine d‚Äôimiter l‚Äôintelligence humaine (raisonner, apprendre, d√©cider).\n\n**üñºÔ∏è D√©finition de l‚ÄôIA g√©n√©rative**\n\nIA g√©n√©rative : branche de l‚ÄôIA capable de cr√©er du contenu nouveau (texte, image, vid√©o, son).\n\nExemples : ChatGPT (texte), DALL-E (images), Midjourney, Claude AI.",
            "4. L'art du prompting": "## 4. L'art du prompting\n\nLe prompting est l‚Äôart de formuler correctement des requ√™tes √† une IA g√©n√©rative pour obtenir un contenu pertinent et pr√©cis.",
            "4. Messages cibl√©s": "## 4. Messages cibl√©s\n\nCeci est une section simple pour afficher des messages aux diff√©rents profils.",
            "5. Utiliser l‚ÄôIA pour Am√©liorer son CV": "## 5. Utiliser l‚ÄôIA pour Am√©liorer son CV\n\nüìå R√©sumons tout en trois mots simples...",
            "6. Quiz de Fin de Formation (20 questions)": "## 6. Quiz de Fin de Formation (20 questions)\n\n‚úÖ Oser r√™ver d√®s le coll√®ge...",
            "7. Conclusion": "## 7. Conclusion\n\nüìå L‚Äôavenir n‚Äôest pas une chance, c‚Äôest une responsabilit√©...",
        }

        current_section = st.session_state.section
        if current_section in CONTENT:
            st.markdown(CONTENT[current_section])

        # Ajout des checkbox demand√©es (uniquement ces 3 blocs, rien d'autre modifi√©)
        if current_section == "2. Comprendre l‚ÄôIA et l‚ÄôIA G√©n√©rative":
            if st.checkbox("üéØ Objectif"):
                st.info("- Comprendre les concepts fondamentaux de l'IA et de l'IA g√©n√©rative.\n\n- Identifier les diff√©rences entre IA classique et IA g√©n√©rative.\n\n- Explorer les applications concr√®tes dans diff√©rents domaines.")
            if st.checkbox("üìñ Pr√©sentation"):
                st.info("- L'Intelligence Artificielle permet √† une machine de raisonner, apprendre et prendre des d√©cisions. \n\n- L'IA g√©n√©rative cr√©e du contenu nouveau : texte, image, son, vid√©o.\n\n- Exemples : ChatGPT pour le texte, DALL-E pour les images, Midjourney, Claude AI.")
                
            

        if current_section == "4. L'art du prompting":
            if st.checkbox("‚≠ê Importance"):
                st.info("Le prompting bien fait maximise la pertinence et l'efficacit√© des r√©ponses de l'IA")
            if st.checkbox("üí° Avantage"):
                st.info("Des prompts efficaces permettent de gagner du temps et d'obtenir un contenu exploitable directement.")
            if st.checkbox("üìã Liste"):
                st.info("Checklist : clair, pr√©cis, contexte, format, attentes, contraintes.")

        if current_section == "5. Utiliser l‚ÄôIA pour Am√©liorer son CV":
            if st.checkbox("‚úÖ Bonnes pratiques"):
                st.markdown("""
                        - Formuler des prompts clairs et pr√©cis.
                        - Ajouter un contexte suffisant pour orienter la r√©ponse de l'IA.
                        - D√©finir le format de sortie attendu.
                        """)
            if st.checkbox("‚ö†Ô∏è Erreurs √† √©viter"):
                st.markdown("""
                        - √ätre trop vague dans le prompt.
                        - Omettre des d√©tails essentiels ou le contexte.
                        - Demander des t√¢ches impossibles ou contradictoires √† l'IA.
                        """)

        # Tableau comparatif et programme IA
        if current_section == "3. Les Domaines de l‚ÄôIA et Applications Utiles":
            if st.checkbox("Afficher le tableau comparatif IA classique vs IA g√©n√©rative"):
                st.markdown("""
                | **IA classique**                        | **IA g√©n√©rative**                    |
                |----------------------------------------|-------------------------------------|
                | Analyse, pr√©dit, classifie, optimise   | Cr√©e du contenu original             |
                | Utilise des mod√®les pr√©dictifs         | Utilise des mod√®les de langage (LLM) |
                | R√©pond √† ‚ÄúQue se passera-t-il ?‚Äù       | R√©pond √† ‚ÄúInvente quelque chose de nouveau‚Äù |
                | Ex. : Syst√®me de recommandation Netflix | Ex. : R√©daction automatique d‚Äôun CV personnalis√© |
                """)

            if st.checkbox("Afficher le tableau comparatif Programme classique vs Programme IA"):
                st.markdown("""
                | **Programme / Script classique**        | **Programme utilisant l‚ÄôIA**        |
                |----------------------------------------|-----------------------------------|
                | Suit des instructions fixes            | Apprend √† partir de donn√©es        |
                | Ne s‚Äôadapte pas automatiquement        | Peut s‚Äôam√©liorer avec l‚Äôexp√©rience |
                | Donne toujours le m√™me r√©sultat pour les m√™mes donn√©es | Peut pr√©dire ou g√©n√©rer des r√©sultats nouveaux |
                | Exemple : script de calcul             | Exemple : mod√®le de pr√©diction de prix |
                """)

        # Messages cibl√©s
        if current_section == "4. Messages cibl√©s":
            if st.checkbox("Aux √©l√®ves et aux √©tudiants"):
                st.info("üëâ Vous devez explorer, tester, √™tre curieux, car le dipl√¥me seul ne comptera pas.")
            if st.checkbox("Dipl√¥m√©s en recherche d'emploi"):
                st.info("üëâ Votre valeur n‚Äôest pas d√©finie par votre situation actuelle. Montrez vos talents, m√™me √† petite √©chelle.")
            if st.checkbox("Aux travailleurs"):
                st.info("üëâ Le monde change, et vous devez vous r√©inventer.")

        # Section Quiz
        if current_section == "6. Quiz de Fin de Formation (20 questions)":
            if st.button("üì≤ Cliquez ici pour voir le QR Code du Quiz"):
                qr_path = Path("/Users/jeremie/Desktop/Myprojet_C02/Quiz_seÃÅpa_en_2_IA.png")
                if qr_path.exists():
                    img_qr = Image.open(qr_path)
                    img_qr = img_qr.resize((200, 180))
                    st.image(img_qr, caption="Scannez pour acc√©der au Quiz")
                else:
                    st.warning("‚ö†Ô∏è QR Code introuvable, v√©rifiez le fichier.")
                    
        if current_section == "7. Conclusion":
            st.markdown("""
                    - L'IA est un outil puissant pour am√©liorer vos comp√©tences et votre visibilit√©.
                    - Ma√Ætriser le prompting et l'utilisation des outils IA est essentiel.
                    - Int√©grer l'IA dans votre parcours professionnel avec prudence et strat√©gie.
                    """)

        st.markdown("<div class='footnote'>¬© Pr√©sentation - By J√©r√©mie KPOGHOMOU - Data Scientist.</div>", unsafe_allow_html=True)


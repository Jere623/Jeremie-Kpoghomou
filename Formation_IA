import streamlit as st
from pathlib import Path
from PIL import Image
import io

# ------------------------------
# Page config & initial state
# ------------------------------
st.set_page_config(
    page_title="L'IA, le monde de demain  – Présentation interactive",
    page_icon="✨",
    layout="wide",
)

if "initialized" not in st.session_state:
    st.session_state.initialized = True
    st.session_state.section = "Introduction"
    st.session_state.presentation_on = False
    st.session_state.profile = {
        "name": "Jérémie KPOGHOMOU",
        "profil": "Ingénieur Data chez Safran Aircraft Engines",
        "image_path": "KPOGHOMOU-Style libre-102x152 mm.jpg",
        "linkedin": "https://www.linkedin.com/in/jérémiekpoghomou/",
        "email": "jeremie.kpoghomou77@gmail.com",
        "github": "https://github.com/Jere623",
        "linkedin_logo": "Linkedin-Logo-PNG.png",
        "github_logo": "GitHub-cat-logo.jpg",
    }

# ------------------------------
# Custom CSS (animations & style)
# ------------------------------
st.markdown(
    """
    <style>
    :root { --radius: 16px; }

    .big-title {
        font-weight: 800;
        font-size: clamp(32px, 5vw, 60px);
        line-height: 1.2;
        margin: 0 0 12px 0;
        background: linear-gradient(90deg, red, yellow, green);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        animation: glow 6s ease-in-out infinite;
    }

    @keyframes glow {
        0%,100% { filter: drop-shadow(0 0 0px rgba(0,0,0,0)); }
        50% { filter: drop-shadow(0 0 6px rgba(0,0,0,.35)); }
    }

    .profile-name {
        font-weight: 800; font-size: 1.5rem;
        margin-top: 2px; margin-bottom: 2px;
    }

    .profile-profil {
        font-weight: 800;
        font-size: 1.2rem;
        color: purple;
        margin-top: 2px; margin-bottom: 6px;
    }

    .profile-info {
        font-size: 0.85rem;
        margin-bottom: 4px;
        display: flex;
        align-items: center;
    }

    .profile-info img {
        width: 20px; height: 20px;
        margin-right: 6px;
        object-fit: contain;
    }

    .intro-box {
        background-color: #f5f5f5;
        border-radius: 16px;
        padding: 0px;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
        text-align: center;
    }

    .intro-box img {
        margin: 0;
    }

    .footnote {
        font-size: 1rem;
        opacity: .8;
        margin-top: 10px;
        text-align: center;
    }

    .quiz-button {
        background-color: #FF5733;
        color: white;
        font-weight: bold;
        padding: 12px;
        border-radius: 12px;
        text-align: center;
        cursor: pointer;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.3);
    }

    .nice-button {
        display: inline-block;
        background: linear-gradient(90deg, #ff7e5f, #feb47b);
        color: white;
        font-weight: bold;
        padding: 12px 24px;
        border-radius: 12px;
        text-align: center;
        text-decoration: none;
        font-size: 1.1rem;
        transition: 0.3s;
    }
    .nice-button:hover {
        background: linear-gradient(90deg, #feb47b, #ff7e5f);
        transform: scale(1.05);
        cursor: pointer;
    }
    </style>
    """,
    unsafe_allow_html=True,
)

# ------------------------------
# LAYOUT: Left panel
# ------------------------------
left, right = st.columns([1, 3])

with left:
    if st.button("🔘 On|Off la Présentation"):
        st.session_state.presentation_on = not st.session_state.presentation_on

    show_qr_checkbox = st.checkbox("QRcode", value=False)
    if show_qr_checkbox:
        show_real_qr = st.checkbox("Afficher QRcode", value=True)
        if show_real_qr:
            qr_path = Path("/Users/jeremie/Desktop/Myprojet_C02/QRCode_Formation_IA.png")
            if qr_path.exists():
                img_qr = Image.open(qr_path)
                st.image(img_qr, caption="🔗 QR Code", use_column_width=True)
            else:
                st.warning("Le fichier QRCode_Quiz.png est introuvable.")

    if st.session_state.presentation_on:
        selected_section = st.radio(
            label="SOMMAIRE",
            options=[
                "Introduction",
                "1. Présentation",
                "2. Comprendre l’IA et l’IA Générative",
                "3. Les Domaines de l’IA et Applications Utiles",
                "4. L'art du prompting",
                "4. Messages ciblés",
                "5. Utiliser l’IA pour Améliorer son CV",
                "6. Quiz de Fin de Formation (20 questions)",
                "7. Conclusion",
            ],
            index=0,
            key="radio_plan"
        )
        st.session_state.section = selected_section

        # Profil affiché dans le panneau gauche
        prof = st.session_state.profile
        img_path = Path(prof.get("image_path", ""))
        if img_path.exists():
            img = Image.open(img_path)
            img = img.resize((180, 200))
            st.image(img)
        else:
            st.warning("Aucune image valide trouvée.")

        st.markdown(f"<div class='profile-name'>{prof['name']}</div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-profil'>{prof['profil']}</div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-info'><img src='file://{prof['linkedin_logo']}' /> <a href='{prof['linkedin']}' target='_blank'>{prof['linkedin']}</a></div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-info'><img src='file://{prof['github_logo']}' /> <a href='{prof['github']}' target='_blank'>{prof['github']}</a></div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-info'>Email: <a href='mailto:{prof['email']}'>{prof['email']}</a></div>", unsafe_allow_html=True)

# ------------------------------
# RIGHT: Display section content dynamically
# ------------------------------
with right:
    if st.session_state.presentation_on:
        st.markdown("<div class='big-title' style='text-align: center;'>Comprendre le fonctionnement de l'IA et l'IA générative, améliorer son CV</div>", unsafe_allow_html=True)
        st.caption("L'IA, le monde de demain  – Présentation interactive")

        # Nouveau contenu injecté dans chaque section
        CONTENT = {
            "Introduction": "## Introduction & Objectifs de la Formation\n\n**🎯 Objectifs pédagogiques :**\n1. Comprendre ce qu’est l’Intelligence Artificielle (IA) et l’IA générative\n2. Découvrir les domaines et applications majeures de l’IA\n3. Apprendre à utiliser l’IA pour améliorer son CV\n4. Savoir rédiger des prompts efficaces pour générer du contenu pertinent\n5. Éviter les pièges courants liés à l’ATS et à la rédaction de CV\n6. Explorer les meilleurs sites et outils pour créer un CV optimisé.",
            "1. Présentation": "## 1. Présentation.\n\n**📌 Parcours Scolaire**\n\nExpériences professionnelles...",
            "2. Comprendre l’IA et l’IA Générative": "## 2. Comprendre l’IA et l’IA Génative.\n\n**🎯 Objectifs pédagogiques**\n\nComprendre ce qu’est l’Intelligence Artificielle (IA) et l’IA générative.\nDécouvrir les domaines et applications majeures de l’IA.\nApprendre à utiliser l’IA pour améliorer son CV.\nSavoir rédiger des prompts efficaces pour générer du contenu pertinent.\nÉviter les pièges courants liés à l’ATS et à la rédaction de CV.\nExplorer les meilleurs sites et outils pour créer un CV optimisé....",
            "3. Les Domaines de l’IA et Applications Utiles": "## 3. Les Domaines de l’IA et Applications Utiles\n\n**🧠 Définition de l’IA**\n\nComprendre ce qu’est l’Intelligence Artificielle (IA) et l’IA générative.\nIA (Intelligence Artificielle) : ensemble de technologies permettant à une machine d’imiter l’intelligence humaine (raisonner, apprendre, décider).\n\n**🖼️ Définition de l’IA générative**\n\nIA générative : branche de l’IA capable de créer du contenu nouveau (texte, image, vidéo, son).\nExemples : ChatGPT (texte), DALL-E (images), Midjourney, Claude AI.",
            "4. L'art du prompting": "## 4. L'art du prompting\n\nLe prompting est l’art de formuler correctement des requêtes à une IA générative pour obtenir un contenu pertinent et précis.",
            "4. Messages ciblés": "## 4. Messages ciblés\n\nCeci est une section simple pour afficher des messages aux différents profils.",
            "5. Utiliser l’IA pour Améliorer son CV": "## 5. Utiliser l’IA pour Améliorer son CV\n\n📌 Résumons tout en trois mots simples...",
            "6. Quiz de Fin de Formation (20 questions)": "## 6. Quiz de Fin de Formation (20 questions)\n\n✅ Oser rêver dès le collège...",
            "7. Conclusion": "## 7. Conclusion\n\n📌 L’avenir n’est pas une chance, c’est une responsabilité...",
        }

        current_section = st.session_state.section
        if current_section in CONTENT:
            st.markdown(CONTENT[current_section])

        # Ajout des checkbox demandées (uniquement ces 3 blocs, rien d'autre modifié)
        if current_section == "2. Comprendre l’IA et l’IA Générative":
            if st.checkbox("🎯 Objectif"):
                st.info("aaaaaa")
            if st.checkbox("📖 Présentation"):
                st.info("yyyyyy")
            

        if current_section == "4. L'art du prompting":
            if st.checkbox("⭐ Importance"):
                st.info("vsbsbsbssbsb")
            if st.checkbox("💡 Avantage"):
                st.info("oooooooooo")
            if st.checkbox("📋 Liste"):
                st.info("fffffffff")

        if current_section == "5. Utiliser l’IA pour Améliorer son CV":
            if st.checkbox("✅ Bonnes pratiques"):
                st.info("eeeeee")
            if st.checkbox("⚠️ Erreurs à éviter"):
                st.info("tttttttt")

        # Tableau comparatif et programme IA
        if current_section == "3. Les Domaines de l’IA et Applications Utiles":
            if st.checkbox("Afficher le tableau comparatif IA classique vs IA générative"):
                st.markdown("""
                | **IA classique**                        | **IA générative**                    |
                |----------------------------------------|-------------------------------------|
                | Analyse, prédit, classifie, optimise   | Crée du contenu original             |
                | Utilise des modèles prédictifs         | Utilise des modèles de langage (LLM) |
                | Répond à “Que se passera-t-il ?”       | Répond à “Invente quelque chose de nouveau” |
                | Ex. : Système de recommandation Netflix | Ex. : Rédaction automatique d’un CV personnalisé |
                """)

            if st.checkbox("Afficher le tableau comparatif Programme classique vs Programme IA"):
                st.markdown("""
                | **Programme / Script classique**        | **Programme utilisant l’IA**        |
                |----------------------------------------|-----------------------------------|
                | Suit des instructions fixes            | Apprend à partir de données        |
                | Ne s’adapte pas automatiquement        | Peut s’améliorer avec l’expérience |
                | Donne toujours le même résultat pour les mêmes données | Peut prédire ou générer des résultats nouveaux |
                | Exemple : script de calcul             | Exemple : modèle de prédiction de prix |
                """)

        # Messages ciblés
        if current_section == "4. Messages ciblés":
            if st.checkbox("Aux élèves et aux étudiants"):
                st.info("👉 Vous devez explorer, tester, être curieux, car le diplôme seul ne comptera pas.")
            if st.checkbox("Diplômés en recherche d'emploi"):
                st.info("👉 Votre valeur n’est pas définie par votre situation actuelle. Montrez vos talents, même à petite échelle.")
            if st.checkbox("Aux travailleurs"):
                st.info("👉 Le monde change, et vous devez vous réinventer.")

        # Section Quiz
        if current_section == "6. Quiz de Fin de Formation (20 questions)":
            if st.button("📲 Cliquez ici pour voir le QR Code du Quiz"):
                qr_path = Path("/Users/jeremie/Desktop/Myprojet_C02/Quiz_sépa_en_2_IA.png")
                if qr_path.exists():
                    img_qr = Image.open(qr_path)
                    img_qr = img_qr.resize((200, 180))
                    st.image(img_qr, caption="Scannez pour accéder au Quiz")
                else:
                    st.warning("⚠️ QR Code introuvable, vérifiez le fichier.")

        st.markdown("<div class='footnote'>© Présentation - By Jérémie KPOGHOMOU - Data Scientist.</div>", unsafe_allow_html=True)

------------------------------------------------------------

import streamlit as st
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from sklearn.linear_model import LinearRegression
from sklearn.ensemble import RandomForestRegressor, ExtraTreesRegressor
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler
from sklearn.metrics import mean_squared_error, r2_score, confusion_matrix, accuracy_score, precision_score, recall_score, f1_score
from joblib import dump, load
import xgboost as xgb
from xgboost import XGBRegressor
from sklearn.ensemble import RandomForestClassifier, ExtraTreesClassifier, BaggingClassifier

df = pd.read_csv('Modelisation.csv')
df = df[df.Vehicule_loisir == 1]
def fonction_1(df):
   


    st.title("Régressions")
    st.write("## Prédiction du taux de CO2")

    # Types de carburant proposés
    chx_carb = ["Essence", "Diesel"]

    # Choix des valeurs des variables
    masse_value = st.text_input("Masse du véhicule (kg)", value=1490)
    empattement_value = st.text_input("Empattement du véhicule (mm)", value=2650)
    larg_essieu_dir_value = st.text_input("Largeur de l'essieu directeur (mm)", value=1541)
    puissance_moteur_value = st.text_input("Puissance du moteur (kW)", value=96)
    cylindree_value = st.text_input("Cylindrée du véhicule (cm³)", value=1598)

    # Choix du type de carburant
    st.write(" ###### Choix du type de carburant :")
    input_data = pd.DataFrame({
        'Masse': [masse_value],
        'Empattement': [empattement_value],
        'Larg_essieu_dir': [larg_essieu_dir_value],
        'Puiss_moteur': [puissance_moteur_value],
        'Cylindree': [cylindree_value],
        'Type_carburant_Diesel': [1 if st.checkbox("Diesel") else 0],
        'Type_carburant_Essence': [1 if st.checkbox("Essence") else 0]
    })

    # Sélection des variables pour la régression
    df_num = df[['Emis_CO2_spe', 'Masse', 'Empattement', 'Larg_essieu_dir', 'Puiss_moteur', 'Cylindree']]
    df_filtered = df[df['Type_carburant'].isin(['Diesel', 'Essence'])]
    df_cat = pd.get_dummies(df_filtered[['Type_carburant']])
    df_model = pd.concat([df_num, df_cat], axis=1)
    df_model = df_model.dropna()

    # Création des régresseurs
    lr = LinearRegression()
    rfr = RandomForestRegressor()
    etr = ExtraTreesRegressor()
    xgb_reg = XGBRegressor()

    # Choix du modèle
    reg_choisie = st.selectbox(" ###### Choix de la régression :", ['LinearRegression', 'ExtraTreesRegressor', 'RandomForestRegressor', 'XGBRegressor'])
    reg = lr if reg_choisie == "LinearRegression" else etr if reg_choisie == "ExtraTreesRegressor" else rfr if reg_choisie == "RandomForestRegressor" else xgb_reg

    # Séparation du jeu de données
    X = df_model.drop(['Emis_CO2_spe'], axis=1)
    y = df_model['Emis_CO2_spe']

    # Création d'un jeu d'entraînement et d'un jeu de tests
    X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

    # Standardisation des données
    scaler = StandardScaler()
    X_train = scaler.fit_transform(X_train)
    X_test = scaler.transform(X_test)

    # Entraînement du modèle
    reg.fit(X_train, y_train)

    # Enregistrement du modèle
    modele_filename = f"modele_{reg_choisie.lower()}.pkl"
    dump(reg, modele_filename)

    # Chargement du modèle
    modele = load(modele_filename)

    # Affichage du taux de CO2 prédit pour le type de carburant choisi
    input_data = scaler.transform(input_data)
    y_pred_input = modele.predict(input_data)
    st.write(f" ### Taux de CO2 prédit : {y_pred_input[0]:.3f} g/km")

    # Prédiction
    y_pred = modele.predict(X_test)

    # Prédiction pour le type de carburant choisi
    input_data = scaler.transform(input_data)
    y_pred_input = modele.predict(input_data)

    # Calcul des métriques (RMSE et R^2) avec les prédictions sur le jeu de test
    y_test_pred = modele.predict(X_test)
    mse = mean_squared_error(y_test, y_test_pred)
    rmse = np.sqrt(mse)
    r2 = r2_score(y_test, y_test_pred)

    # Affichage des métriques
    st.write("#### Performance du modèle :")
    st.write(f"R² : {r2}")
    st.write(f"RMSE : {rmse}")

    # Graphique nuage de points
    fig, ax = plt.subplots()
    ax.scatter(y_test, y_pred, s=30, alpha=0.5)
    ax.plot([min(y_test), max(y_test)], [min(y_test), max(y_test)])
    ax.set_xlabel("Valeurs réelles")
    ax.set_ylabel("Prédictions")
    ax.set_title("Nuage de points (Réel vs Prédiction)")
    st.pyplot(fig)

    # Calcul de l'importance des caractéristiques
    importances = getattr(reg, 'feature_importances_', None)

    # Affichage du graphique d'importance des caractéristiques si les importances sont disponibles
    if importances is not None:
        feature_names = X.columns
        importance_df = pd.DataFrame({'Feature': feature_names, 'Importance': importances})

        # Tri du DataFrame par ordre décroissant
        importance_df = importance_df.sort_values(by='Importance', ascending=True)

        st.write("### Importance des caractéristiques")
        fig, ax = plt.subplots()
        ax.barh(importance_df['Feature'], importance_df['Importance'])
        ax.set_xlabel('Importance')
        ax.set_title(f'Importance des caractéristiques pour {reg_choisie}')
        st.pyplot(fig)

def fonction_2(df):
    st.title("Classification")
    st.write("## Prédiction des classes de CO2")

    # Choix des valeurs des variables
    masse_value = st.text_input("Masse du véhicule (kg) :", value=1490)
    empattement_value = st.text_input("Empattement du véhicule (mm) :", value=2650)
    larg_essieu_dir_value = st.text_input("Largeur de l'essieu directeur (mm) :", value=1541)
    puissance_moteur_value = st.text_input("Puissance du moteur (kW) :", value=96)
    cylindree_value = st.text_input("Cylindrée du véhicule (cm³) :", value=1598)

    # Sélection du modèle
    reg_choisie = st.selectbox(" ###### Choix de la classification :", ['RandomForestClassifier', 'ExtraTreesClassifier', 'BaggingClassifier'])

    # Sélection des hyperparamètres en fonction du modèle choisi
    if reg_choisie == "RandomForestClassifier":
        reg = RandomForestClassifier(n_jobs=-1, random_state=321, max_depth=20, min_samples_leaf=1, min_samples_split=2, n_estimators=300)
    elif reg_choisie == "ExtraTreesClassifier":
        reg = ExtraTreesClassifier(n_estimators=100, random_state=42)
    elif reg_choisie == "BaggingClassifier":
        reg = BaggingClassifier(n_estimators=1000, oob_score=True)

    # Séparation du jeu de données
    X = df[['Masse', 'Empattement', 'Larg_essieu_dir', 'Puiss_moteur', 'Cylindree']]
    y = df['Classe_CO2']

    # Création d'un jeu d'entraînement et d'un jeu de tests
    X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

    # Standardisation des données
    scaler_classification = StandardScaler()
    X_train_classification = scaler_classification.fit_transform(X_train)
    X_test_classification = scaler_classification.transform(X_test)

    # Entraînement du modèle
    reg.fit(X_train_classification, y_train)

    # Enregistrement du modèle
    modele_filename = f"modele_{reg_choisie.lower()}.pkl"
    dump(reg, modele_filename)

    # Chargement du modèle
    modele = load(modele_filename)

    # Affichage du taux de CO2 prédit pour le type de carburant choisi
    input_data = np.array([masse_value, empattement_value, larg_essieu_dir_value, puissance_moteur_value, cylindree_value]).reshape(1, -1)
    input_data_standardized_classification = scaler_classification.transform(input_data)
    classe_CO2_predite = modele.predict(input_data_standardized_classification)
    st.write(f" ### Classe de CO2 prédite pour les paramètres choisis : {classe_CO2_predite[0]}")

    # Prédiction sur le jeu de test
    y_pred_classification = modele.predict(X_test_classification)

    # Évaluation du modèle
    conf_matrix = confusion_matrix(y_test, y_pred_classification)
    accuracy = accuracy_score(y_test, y_pred_classification)
    precision = precision_score(y_test, y_pred_classification, average='weighted')
    recall = recall_score(y_test, y_pred_classification, average='weighted')
    f1 = f1_score(y_test, y_pred_classification, average='weighted')

    # Affichage des résultats
    st.write("#### Performance du modèle :")
    st.write(f"Accuracy : {accuracy}")
    st.write(f"Precision : {precision}")
    st.write(f"Recall : {recall}")
    st.write(f"F1 Score : {f1}")
    
    # Affichage de la matrice de confusion
    st.write("### Matrice de confusion :")
    st.write(pd.DataFrame(conf_matrix, columns=[f'Prédit {i}' for i in reg.classes_], index=[f'Vrai {i}' for i in reg.classes_]))

    # Texte explicatif sur les classes de CO2
    st.write("Les classes de CO2 sont définies comme suit :")
    st.write("- Classe 'A': Taux inférieurs ou égaux à 100 g/km")
    st.write("- Classe 'B': Taux entre 100 et 120 g/km")
    st.write("- Classe 'C': Taux entre 120 et 140 g/km")
    st.write("- Classe 'D': Taux entre 140 et 160 g/km")
    st.write("- Classe 'E': Taux entre 160 et 200 g/km")
    st.write("- Classe 'F': Taux entre 200 et 250 g/km")
    st.write("- Classe 'G': Taux supérieurs à 250 g/km")
    st.write("\n")

def main():
    fonction_1(df)
    fonction_2(df)
main()




import streamlit as st
from pathlib import Path
from PIL import Image
import io

# ------------------------------
# Page config & initial state
# ------------------------------
st.set_page_config(
    page_title="L'IA, le monde de demain  – Présentation interactive",
    page_icon="✨",
    layout="wide",
)

if "initialized" not in st.session_state:
    st.session_state.initialized = True
    st.session_state.section = "Introduction"
    st.session_state.presentation_on = False
    st.session_state.profile = {
        "name": "Jérémie KPOGHOMOU",
        "profil": "Ingénieur Data chez Safran Aircraft Engines",
        "image_path": "KPOGHOMOU-Style libre-102x152 mm.jpg",
        "linkedin": "https://www.linkedin.com/in/jérémiekpoghomou/",
        "email": "jeremie.kpoghomou77@gmail.com",
        "github": "https://github.com/Jere623",
        "linkedin_logo": "Linkedin-Logo-PNG.png",
        "github_logo": "GitHub-cat-logo.jpg",
    }

# ------------------------------
# Custom CSS (animations & style)
# ------------------------------
st.markdown(
    """
    <style>
    :root { --radius: 16px; }

    .big-title {
        font-weight: 800;
        font-size: clamp(32px, 5vw, 60px);
        line-height: 1.2;
        margin: 0 0 12px 0;
        background: linear-gradient(90deg, red, yellow, green);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        animation: glow 6s ease-in-out infinite;
    }

    @keyframes glow {
        0%,100% { filter: drop-shadow(0 0 0px rgba(0,0,0,0)); }
        50% { filter: drop-shadow(0 0 6px rgba(0,0,0,.35)); }
    }

    .profile-name {
        font-weight: 800; font-size: 1.5rem;
        margin-top: 2px; margin-bottom: 2px;
    }

    .profile-profil {
        font-weight: 800;
        font-size: 1.2rem;
        color: purple;
        margin-top: 2px; margin-bottom: 6px;
    }

    .profile-info {
        font-size: 0.85rem;
        margin-bottom: 4px;
        display: flex;
        align-items: center;
    }

    .profile-info img {
        width: 20px; height: 20px;
        margin-right: 6px;
        object-fit: contain;
    }

    .intro-box {
        background-color: #f5f5f5;
        border-radius: 16px;
        padding: 0px;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
        text-align: center;
    }

    .intro-box img {
        margin: 0;
    }

    .footnote {
        font-size: 1rem;
        opacity: .8;
        margin-top: 10px;
        text-align: center;
    }

    .quiz-button {
        background-color: #FF5733;
        color: white;
        font-weight: bold;
        padding: 12px;
        border-radius: 12px;
        text-align: center;
        cursor: pointer;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.3);
    }

    .nice-button {
        display: inline-block;
        background: linear-gradient(90deg, #ff7e5f, #feb47b);
        color: white;
        font-weight: bold;
        padding: 12px 24px;
        border-radius: 12px;
        text-align: center;
        text-decoration: none;
        font-size: 1.1rem;
        transition: 0.3s;
    }
    .nice-button:hover {
        background: linear-gradient(90deg, #feb47b, #ff7e5f);
        transform: scale(1.05);
        cursor: pointer;
    }
    </style>
    """,
    unsafe_allow_html=True,
)

# ------------------------------
# LAYOUT: Left panel
# ------------------------------
left, right = st.columns([1, 3])

with left:
    if st.button("🔘 On|Off la Présentation"):
        st.session_state.presentation_on = not st.session_state.presentation_on

    show_qr_checkbox = st.checkbox("QRcode", value=False)
    if show_qr_checkbox:
        show_real_qr = st.checkbox("Afficher QRcode", value=True)
        if show_real_qr:
            qr_path = Path("/Users/jeremie/Desktop/Myprojet_C02/QRCode_Formation_IA.png")
            if qr_path.exists():
                img_qr = Image.open(qr_path)
                st.image(img_qr, caption="🔗 QR Code", use_column_width=True)
            else:
                st.warning("Le fichier QRCode_Quiz.png est introuvable.")

    if st.session_state.presentation_on:
        selected_section = st.radio(
            label="SOMMAIRE",
            options=[
                "Introduction",
                "1. Présentation",
                "2. Comprendre l’IA et l’IA Générative",
                "3. Les Domaines de l’IA et Applications Utiles",
                "4. L'art du prompting",
                "4. Messages ciblés",
                "5. Utiliser l’IA pour Améliorer son CV",
                "6. Quiz de Fin de Formation (20 questions)",
                "7. Conclusion",
            ],
            index=0,
            key="radio_plan"
        )
        st.session_state.section = selected_section

        # Profil affiché dans le panneau gauche
        prof = st.session_state.profile
        img_path = Path(prof.get("image_path", ""))
        if img_path.exists():
            img = Image.open(img_path)
            img = img.resize((180, 200))
            st.image(img)
        else:
            st.warning("Aucune image valide trouvée.")

        st.markdown(f"<div class='profile-name'>{prof['name']}</div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-profil'>{prof['profil']}</div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-info'><img src='file://{prof['linkedin_logo']}' /> <a href='{prof['linkedin']}' target='_blank'>{prof['linkedin']}</a></div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-info'><img src='file://{prof['github_logo']}' /> <a href='{prof['github']}' target='_blank'>{prof['github']}</a></div>", unsafe_allow_html=True)
        st.markdown(f"<div class='profile-info'>Email: <a href='mailto:{prof['email']}'>{prof['email']}</a></div>", unsafe_allow_html=True)

# ------------------------------
# RIGHT: Display section content dynamically
# ------------------------------
with right:
    if st.session_state.presentation_on:
        st.markdown("<div class='big-title' style='text-align: center;'>Comprendre le fonctionnement de l'IA et l'IA générative, améliorer son CV</div>", unsafe_allow_html=True)
        st.caption("L'IA, le monde de demain  – Présentation interactive")

        # Nouveau contenu injecté dans chaque section
        CONTENT = {
            "Introduction": "## Introduction & Objectifs de la Formation\n\n**🎯 Objectifs pédagogiques :**\n1. Comprendre ce qu’est l’Intelligence Artificielle (IA) et l’IA générative\n2. Découvrir les domaines et applications majeures de l’IA\n\n3. Savoir rédiger des prompts efficaces pour générer du contenu pertinent \n\n4. Apprendre à utiliser l’IA pour améliorer son CVn.\n\n5. Éviter les pièges courants liés à l’ATS et à la rédaction de CV\n\n6. Explorer les meilleurs sites et outils pour créer un CV optimisé.",
            "1. Présentation": "## 1. Présentation.\n\n**📌 Parcours Scolaire**\n\nExpériences professionnelles...",
            "2. Comprendre l’IA et l’IA Générative": "## 2. Comprendre l’IA et l’IA Générative.\n\n**🎯 Objectifs pédagogiques**\n\nComprendre ce qu’est l’Intelligence Artificielle (IA) et l’IA générative.\n\nDécouvrir les domaines et applications majeures de l’IA.\n\nApprendre à utiliser l’IA pour améliorer son CV.\n\nSavoir rédiger des prompts efficaces pour générer du contenu pertinent.\n\nÉviter les pièges courants liés à l’ATS et à la rédaction de CV.\n\nExplorer les meilleurs sites et outils pour créer un CV optimisé....",
            "3. Les Domaines de l’IA et Applications Utiles": "## 3. Les Domaines de l’IA et Applications Utiles\n\n**🧠 Définition de l’IA**\n\nComprendre ce qu’est l’Intelligence Artificielle (IA) et l’IA générative.\n\nIA (Intelligence Artificielle) : ensemble de technologies permettant à une machine d’imiter l’intelligence humaine (raisonner, apprendre, décider).\n\n**🖼️ Définition de l’IA générative**\n\nIA générative : branche de l’IA capable de créer du contenu nouveau (texte, image, vidéo, son).\n\nExemples : ChatGPT (texte), DALL-E (images), Midjourney, Claude AI.",
            "4. L'art du prompting": "## 4. L'art du prompting\n\nLe prompting est l’art de formuler correctement des requêtes à une IA générative pour obtenir un contenu pertinent et précis.",
            "4. Messages ciblés": "## 4. Messages ciblés\n\nCeci est une section simple pour afficher des messages aux différents profils.",
            "5. Utiliser l’IA pour Améliorer son CV": "## 5. Utiliser l’IA pour Améliorer son CV\n\n📌 Résumons tout en trois mots simples...",
            "6. Quiz de Fin de Formation (20 questions)": "## 6. Quiz de Fin de Formation (20 questions)\n\n✅ Oser rêver dès le collège...",
            "7. Conclusion": "## 7. Conclusion\n\n📌 L’avenir n’est pas une chance, c’est une responsabilité...",
        }

        current_section = st.session_state.section
        if current_section in CONTENT:
            st.markdown(CONTENT[current_section])

        # Ajout des checkbox demandées (uniquement ces 3 blocs, rien d'autre modifié)
        if current_section == "2. Comprendre l’IA et l’IA Générative":
            if st.checkbox("🎯 Objectif"):
                st.info("- Comprendre les concepts fondamentaux de l'IA et de l'IA générative.\n\n- Identifier les différences entre IA classique et IA générative.\n\n- Explorer les applications concrètes dans différents domaines.")
            if st.checkbox("📖 Présentation"):
                st.info("- L'Intelligence Artificielle permet à une machine de raisonner, apprendre et prendre des décisions. \n\n- L'IA générative crée du contenu nouveau : texte, image, son, vidéo.\n\n- Exemples : ChatGPT pour le texte, DALL-E pour les images, Midjourney, Claude AI.")
                
            

        if current_section == "4. L'art du prompting":
            if st.checkbox("⭐ Importance"):
                st.info("Le prompting bien fait maximise la pertinence et l'efficacité des réponses de l'IA")
            if st.checkbox("💡 Avantage"):
                st.info("Des prompts efficaces permettent de gagner du temps et d'obtenir un contenu exploitable directement.")
            if st.checkbox("📋 Liste"):
                st.info("Checklist : clair, précis, contexte, format, attentes, contraintes.")

        if current_section == "5. Utiliser l’IA pour Améliorer son CV":
            if st.checkbox("✅ Bonnes pratiques"):
                st.markdown("""
                        - Formuler des prompts clairs et précis.
                        - Ajouter un contexte suffisant pour orienter la réponse de l'IA.
                        - Définir le format de sortie attendu.
                        """)
            if st.checkbox("⚠️ Erreurs à éviter"):
                st.markdown("""
                        - Être trop vague dans le prompt.
                        - Omettre des détails essentiels ou le contexte.
                        - Demander des tâches impossibles ou contradictoires à l'IA.
                        """)

        # Tableau comparatif et programme IA
        if current_section == "3. Les Domaines de l’IA et Applications Utiles":
            if st.checkbox("Afficher le tableau comparatif IA classique vs IA générative"):
                st.markdown("""
                | **IA classique**                        | **IA générative**                    |
                |----------------------------------------|-------------------------------------|
                | Analyse, prédit, classifie, optimise   | Crée du contenu original             |
                | Utilise des modèles prédictifs         | Utilise des modèles de langage (LLM) |
                | Répond à “Que se passera-t-il ?”       | Répond à “Invente quelque chose de nouveau” |
                | Ex. : Système de recommandation Netflix | Ex. : Rédaction automatique d’un CV personnalisé |
                """)

            if st.checkbox("Afficher le tableau comparatif Programme classique vs Programme IA"):
                st.markdown("""
                | **Programme / Script classique**        | **Programme utilisant l’IA**        |
                |----------------------------------------|-----------------------------------|
                | Suit des instructions fixes            | Apprend à partir de données        |
                | Ne s’adapte pas automatiquement        | Peut s’améliorer avec l’expérience |
                | Donne toujours le même résultat pour les mêmes données | Peut prédire ou générer des résultats nouveaux |
                | Exemple : script de calcul             | Exemple : modèle de prédiction de prix |
                """)

        # Messages ciblés
        if current_section == "4. Messages ciblés":
            if st.checkbox("Aux élèves et aux étudiants"):
                st.info("👉 Vous devez explorer, tester, être curieux, car le diplôme seul ne comptera pas.")
            if st.checkbox("Diplômés en recherche d'emploi"):
                st.info("👉 Votre valeur n’est pas définie par votre situation actuelle. Montrez vos talents, même à petite échelle.")
            if st.checkbox("Aux travailleurs"):
                st.info("👉 Le monde change, et vous devez vous réinventer.")

        # Section Quiz
        if current_section == "6. Quiz de Fin de Formation (20 questions)":
            if st.button("📲 Cliquez ici pour voir le QR Code du Quiz"):
                qr_path = Path("/Users/jeremie/Desktop/Myprojet_C02/Quiz_sépa_en_2_IA.png")
                if qr_path.exists():
                    img_qr = Image.open(qr_path)
                    img_qr = img_qr.resize((200, 180))
                    st.image(img_qr, caption="Scannez pour accéder au Quiz")
                else:
                    st.warning("⚠️ QR Code introuvable, vérifiez le fichier.")
                    
        if current_section == "7. Conclusion":
            st.markdown("""
                    - L'IA est un outil puissant pour améliorer vos compétences et votre visibilité.
                    - Maîtriser le prompting et l'utilisation des outils IA est essentiel.
                    - Intégrer l'IA dans votre parcours professionnel avec prudence et stratégie.
                    """)

        st.markdown("<div class='footnote'>© Présentation - By Jérémie KPOGHOMOU - Data Scientist.</div>", unsafe_allow_html=True)

